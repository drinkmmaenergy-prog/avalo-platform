# ========================================================================
# AVALO PAYMENT SYSTEM - ENVIRONMENT VARIABLES
# ========================================================================
#
# Copy this file to .env.local and fill in your values
# Never commit real credentials to version control
#

# ============================================================================
# STRIPE CONFIGURATION
# ============================================================================

# Stripe API Keys (https://dashboard.stripe.com/apikeys)
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLIC_KEY=pk_test_...

# Stripe Webhook Secret (https://dashboard.stripe.com/webhooks)
STRIPE_WEBHOOK_SECRET=whsec_...

# For production, use live keys:
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_PUBLIC_KEY=pk_live_...

# ============================================================================
# APPLE IN-APP PURCHASE CONFIGURATION
# ============================================================================

# Apple Shared Secret (App Store Connect → Apps → In-App Purchases)
APPLE_SHARED_SECRET=your_shared_secret_here

# Set to "true" for sandbox testing, "false" for production
APPLE_SANDBOX=true

# ============================================================================
# APPLICATION URLS
# ============================================================================

# Web application URL (for Stripe redirects)
WEB_URL=http://localhost:3000

# Cloud Functions URL (for webhooks)
FUNCTIONS_URL=http://localhost:5001/avalo/europe-west3

# For production:
# WEB_URL=https://avalo.app
# FUNCTIONS_URL=https://europe-west3-avalo.cloudfunctions.net

# ============================================================================
# PAYMENT CONFIGURATION
# ============================================================================

# Token to fiat settlement rate (PLN)
SETTLEMENT_RATE=0.20

# Default currency for settlements
DEFAULT_CURRENCY=PLN

# Minimum payout amounts
MIN_PAYOUT_EUR=50
MIN_PAYOUT_USD=50
MIN_PAYOUT_PLN=200

# ============================================================================
# ADDITIONAL PAYMENT PROVIDERS (OPTIONAL)
# ============================================================================

# Przelewy24 (Poland)
P24_MERCHANT_ID=
P24_POS_ID=
P24_API_KEY=
P24_CRC_KEY=
P24_SANDBOX=true

# PayU (Central/Eastern Europe)
PAYU_POS_ID=
PAYU_CLIENT_ID=
PAYU_CLIENT_SECRET=
PAYU_SANDBOX=true

# Coinbase Commerce (Cryptocurrency)
COINBASE_COMMERCE_API_KEY=
COINBASE_WEBHOOK_SECRET=

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable/disable payment methods
ENABLE_STRIPE=true
ENABLE_APPLE_IAP=true
ENABLE_PRZELEWY24=false
ENABLE_PAYU=false
ENABLE_COINBASE=false

# Enable settlement auto-processing (use false for manual review)
AUTO_PROCESS_SETTLEMENTS=false

# Enable escrow auto-refund scheduler
ENABLE_AUTO_REFUND=true

# ============================================================================
# TESTING
# ============================================================================

# Set to "true" to use Stripe test mode
STRIPE_TEST_MODE=true

# Test user IDs (for sandbox testing)
TEST_USER_ID=test_user_123
TEST_CREATOR_ID=test_creator_456

# ============================================================================
# MONITORING
# ============================================================================

# Alert email for payment failures
PAYMENT_ALERT_EMAIL=ops@avalo.app

# Webhook retry configuration
WEBHOOK_MAX_RETRIES=5
WEBHOOK_RETRY_DELAY_MS=1000

# ============================================================================
# NOTES
# ============================================================================
#
# 1. Always use test/sandbox mode during development
# 2. Verify webhook endpoints are accessible from the internet
# 3. Set up monitoring alerts for payment failures
# 4. Review pending settlements regularly
# 5. Keep settlement rate updated if token pricing changes
#