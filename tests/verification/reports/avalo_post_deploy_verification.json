{
  "timestamp": "2025-11-05T18:12:47.856Z",
  "projectId": "avalo-c8c46",
  "region": "europe-west3",
  "totalChecks": 40,
  "passed": 1,
  "failed": 13,
  "warnings": 16,
  "skipped": 10,
  "duration": 105,
  "results": [
    {
      "name": "1.1 Emulator Suite Status",
      "stage": "Core Health",
      "status": "warning",
      "duration": 48,
      "message": "Emulators not running: Functions, Firestore, Auth, Storage. Run: firebase emulators:start",
      "data": {
        "status": [
          {
            "name": "Functions",
            "running": false
          },
          {
            "name": "Firestore",
            "running": false
          },
          {
            "name": "Auth",
            "running": false
          },
          {
            "name": "Storage",
            "running": false
          }
        ],
        "running": [],
        "notRunning": [
          "Functions",
          "Firestore",
          "Auth",
          "Storage"
        ]
      }
    },
    {
      "name": "1.2 Health Check: /ping",
      "stage": "Core Health",
      "status": "fail",
      "duration": 2,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "1.2 Health Check: /getSystemInfo",
      "stage": "Core Health",
      "status": "fail",
      "duration": 2,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "1.3 Critical Endpoint: /getExchangeRatesV1",
      "stage": "Core Health",
      "status": "fail",
      "duration": 2,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "1.3 Critical Endpoint: /getUserWalletsV2",
      "stage": "Core Health",
      "status": "fail",
      "duration": 1,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "1.3 Critical Endpoint: /getGlobalFeedV1",
      "stage": "Core Health",
      "status": "fail",
      "duration": 1,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "1.4 Build Timestamp Check",
      "stage": "Core Health",
      "status": "fail",
      "duration": 2,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "2.1 Firebase Auth Emulator",
      "stage": "Backend-Frontend",
      "status": "skip",
      "duration": 4,
      "message": "Auth emulator not running"
    },
    {
      "name": "2.2 Firestore Read/Write",
      "stage": "Backend-Frontend",
      "status": "skip",
      "duration": 1,
      "message": "Firestore emulator not running"
    },
    {
      "name": "2.3 Storage Bucket Access",
      "stage": "Backend-Frontend",
      "status": "skip",
      "duration": 2,
      "message": "Storage emulator not running"
    },
    {
      "name": "2.4 Token Verification Flow",
      "stage": "Backend-Frontend",
      "status": "warning",
      "duration": 0,
      "message": "JWT_SECRET is not properly configured (should be at least 32 characters)"
    },
    {
      "name": "3.1 Stripe API Configuration",
      "stage": "Payments",
      "status": "fail",
      "duration": 0,
      "error": "STRIPE_SECRET_KEY not found in environment"
    },
    {
      "name": "3.2 Stripe Webhook Endpoint",
      "stage": "Payments",
      "status": "warning",
      "duration": 4,
      "message": "Webhook endpoint unreachable"
    },
    {
      "name": "3.3 Purchase Tokens Endpoint",
      "stage": "Payments",
      "status": "fail",
      "duration": 2,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "3.4 Transaction History Endpoint",
      "stage": "Payments",
      "status": "fail",
      "duration": 2,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "4.1 Loyalty Function: claimRewardCallable",
      "stage": "Loyalty",
      "status": "skip",
      "duration": 0,
      "message": "Callable functions require Firebase Admin SDK (manual testing recommended)"
    },
    {
      "name": "4.1 Loyalty Function: getUserLoyaltyCallable",
      "stage": "Loyalty",
      "status": "skip",
      "duration": 0,
      "message": "Callable functions require Firebase Admin SDK (manual testing recommended)"
    },
    {
      "name": "4.1 Loyalty Function: getRankingsCallable",
      "stage": "Loyalty",
      "status": "skip",
      "duration": 0,
      "message": "Callable functions require Firebase Admin SDK (manual testing recommended)"
    },
    {
      "name": "4.2 Leaderboard Endpoint",
      "stage": "Loyalty",
      "status": "warning",
      "duration": 1,
      "message": "Leaderboard endpoint not available or requires authentication"
    },
    {
      "name": "5.1 OpenAI API Key",
      "stage": "AI & Moderation",
      "status": "warning",
      "duration": 0,
      "message": "OPENAI_API_KEY not configured"
    },
    {
      "name": "5.2 Anthropic API Key",
      "stage": "AI & Moderation",
      "status": "warning",
      "duration": 0,
      "message": "ANTHROPIC_API_KEY not configured"
    },
    {
      "name": "5.3 Content Moderation Endpoint",
      "stage": "AI & Moderation",
      "status": "warning",
      "duration": 1,
      "message": "Content moderation endpoint requires authentication or not available"
    },
    {
      "name": "6.1 Translation: English (en)",
      "stage": "i18n",
      "status": "warning",
      "duration": 1,
      "message": "Translation endpoint unavailable or requires authentication"
    },
    {
      "name": "6.1 Translation: Polish (pl)",
      "stage": "i18n",
      "status": "warning",
      "duration": 2,
      "message": "Translation endpoint unavailable or requires authentication"
    },
    {
      "name": "6.1 Translation: Spanish (es)",
      "stage": "i18n",
      "status": "warning",
      "duration": 1,
      "message": "Translation endpoint unavailable or requires authentication"
    },
    {
      "name": "6.1 Translation: German (de)",
      "stage": "i18n",
      "status": "warning",
      "duration": 1,
      "message": "Translation endpoint unavailable or requires authentication"
    },
    {
      "name": "6.1 Translation: French (fr)",
      "stage": "i18n",
      "status": "warning",
      "duration": 0,
      "message": "Translation endpoint unavailable or requires authentication"
    },
    {
      "name": "7.1 HTTPS Enforcement",
      "stage": "Security",
      "status": "skip",
      "duration": 0,
      "message": "Using local emulator (HTTP acceptable for development)"
    },
    {
      "name": "7.2 CORS Configuration",
      "stage": "Security",
      "status": "warning",
      "duration": 0,
      "message": "WEBSITE_ORIGIN not configured"
    },
    {
      "name": "7.3 JWT Secret Strength",
      "stage": "Security",
      "status": "fail",
      "duration": 0,
      "error": "JWT_SECRET not found"
    },
    {
      "name": "7.4 Encryption Key Validation",
      "stage": "Security",
      "status": "warning",
      "duration": 0,
      "message": "ENCRYPTION_KEY not configured"
    },
    {
      "name": "7.5 API Key Exposure Check",
      "stage": "Security",
      "status": "pass",
      "duration": 0,
      "message": "All 0 sensitive keys appear properly configured"
    },
    {
      "name": "8.1 Performance: /ping",
      "stage": "Performance",
      "status": "skip",
      "duration": 4,
      "message": "Endpoint unreachable for performance testing"
    },
    {
      "name": "8.1 Performance: /getSystemInfo",
      "stage": "Performance",
      "status": "skip",
      "duration": 3,
      "message": "Endpoint unreachable for performance testing"
    },
    {
      "name": "8.1 Performance: /getGlobalFeedV1",
      "stage": "Performance",
      "status": "skip",
      "duration": 4,
      "message": "Endpoint unreachable for performance testing"
    },
    {
      "name": "8.2 Cold Start Detection",
      "stage": "Performance",
      "status": "fail",
      "duration": 0,
      "error": "Request failed: fetch failed"
    },
    {
      "name": "8.3 Concurrent Request Handling",
      "stage": "Performance",
      "status": "warning",
      "duration": 4,
      "message": "10/10 concurrent requests failed",
      "data": {
        "successful": 0,
        "failed": 10,
        "totalTime": 3,
        "avgTime": 0.3
      }
    },
    {
      "name": "9.1 Firestore Rules File",
      "stage": "Firestore",
      "status": "fail",
      "duration": 1,
      "error": "firestore.rules file not found"
    },
    {
      "name": "9.2 Firestore Indexes File",
      "stage": "Firestore",
      "status": "warning",
      "duration": 0,
      "message": "firestore.indexes.json file not found"
    },
    {
      "name": "9.3 Rules Security Check",
      "stage": "Firestore",
      "status": "fail",
      "duration": 0,
      "error": "ENOENT: no such file or directory, open 'c:\\Users\\Drink\\avaloapp\\tests\\verification\\firestore.rules'"
    }
  ],
  "performanceMetrics": {
    "endpoints": {},
    "overall": {}
  },
  "securityFindings": [
    "WEBSITE_ORIGIN not configured - CORS may be wide open",
    "JWT_SECRET not configured",
    "ENCRYPTION_KEY not configured",
    "Firestore rules file not found"
  ],
  "recommendations": [
    "‚ö†Ô∏è Address all failed checks before production deployment",
    "‚ö†Ô∏è Review and resolve warning messages",
    "üîí Address 4 security findings"
  ],
  "functionUrls": {
    "ping": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/ping",
    "getSystemInfo": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/getSystemInfo",
    "getExchangeRatesV1": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/getExchangeRatesV1",
    "getUserWalletsV2": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/getUserWalletsV2",
    "getGlobalFeedV1": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/getGlobalFeedV1",
    "stripeWebhook": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/stripeWebhook",
    "purchaseTokensV2": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/purchaseTokensV2",
    "getTransactionHistoryV2": "http://127.0.0.1:5001/avalo-c8c46/europe-west3/getTransactionHistoryV2"
  }
}